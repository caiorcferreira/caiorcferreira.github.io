<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--secondary);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a:hover{color:var(--hover);}h1, h2, h3, h4, h5, h6{font-family:inherit;font-weight:800;text-align:left;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.286ec0a773165cd5aeae.css" id="gatsby-global-css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-191cc9f50f3b76b9617cb383f19acb7d.woff2) format("woff2"),url(/static/montserrat-latin-100-370318464551d5f25b0f0a78f374faac.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-bdeaeb79db315697bd173a55b097dc18.woff2) format("woff2"),url(/static/montserrat-latin-100italic-ecf7d49386e8f265878e735db34a7c4b.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-85d5ef9db7f2dc6979172a4a3b2c57cb.woff2) format("woff2"),url(/static/montserrat-latin-200-1fc98e126a3d152549240e6244d7e669.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-49095760a498d024fe1a85a078850df9.woff2) format("woff2"),url(/static/montserrat-latin-200italic-fe46cf8b9462c820457d3bf537e4057f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-7c3daf12b706645b5d3710f863a4da04.woff2) format("woff2"),url(/static/montserrat-latin-300-8dc95fab9cf98d02ca8d76e97d3dff60.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f20b178ca2024a5eac8e42e6649db86c.woff2) format("woff2"),url(/static/montserrat-latin-300italic-3fe16939288856e8e828fa2661bf2354.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2"),url(/static/montserrat-latin-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-5cad650422a7184467af5a4d17b264c4.woff2) format("woff2"),url(/static/montserrat-latin-400italic-d191f22af3bb50902b99ac577f81a322.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-92d16e458625f4d2c8940f6bdca0ff09.woff2) format("woff2"),url(/static/montserrat-latin-500-8b763220218ffc11c57c84ddb80e7b26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-47bfcca6b69d6a9acca7a8bff17193e2.woff2) format("woff2"),url(/static/montserrat-latin-500italic-72c01f753c3940c0b9cb6bf2389caddf.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-6fb1b5623e528e27c18658fecf5ee0ee.woff2) format("woff2"),url(/static/montserrat-latin-600-7c839d15a6f54e7025ba8c0c4b333e8f.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-60789af1c9338ed1a9546722ec54b4f7.woff2) format("woff2"),url(/static/montserrat-latin-600italic-f3d4de8d0afb19e777c79032ce828e3d.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2"),url(/static/montserrat-latin-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-ba136d97b14e82284dd595e257f11c47.woff2) format("woff2"),url(/static/montserrat-latin-700italic-8c98142b425630821139c24bd1698700.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-b7018be9ed6cd94da8b6675b3a468c3b.woff2) format("woff2"),url(/static/montserrat-latin-800-9a9befcf50d64f9d2d19d8b1d1984add.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-540ffdd223d1a9ad3d4e678e1a23372e.woff2) format("woff2"),url(/static/montserrat-latin-800italic-897086f99f4e1f45e6b1e9368527d0bc.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-58cd789700850375b834e8b6776002eb.woff2) format("woff2"),url(/static/montserrat-latin-900-26d42c9428780e545a540bbb50c84bce.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-451157bc8861fe54f523b3669a3def71.woff2) format("woff2"),url(/static/montserrat-latin-900italic-a8ec4957e1c24f5793305763ad9845b3.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-b1158cfcd4aacb9d8fb61625e37af46a.woff2) format("woff2"),url(/static/merriweather-latin-300-cc7de05e166e90320d7d896e0f72a19d.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-8fe52a48089d6ebe46db0b8e7cc66263.woff2) format("woff2"),url(/static/merriweather-latin-300italic-e1331f5397c2a673f9d3765138debdb5.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-8276fdb72ae8f4714d4e6eba704cc39f.woff2) format("woff2"),url(/static/merriweather-latin-400-69f09800f4f6479d06e44eba837df872.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-3a9be9ea9f7aa4af6de7307df21d9fc0.woff2) format("woff2"),url(/static/merriweather-latin-400italic-d76079ed7541a433a54f79316de086e9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-fa534be7ffa380e39a7f6e03bf9a5e03.woff2) format("woff2"),url(/static/merriweather-latin-700-ba56ea84b8084b7ff9677f50d3cd81bd.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-1ef5edaaa20ae53ea50399884c5e48c6.woff2) format("woff2"),url(/static/merriweather-latin-700italic-534bc9e7ce93c73d73426e46acd78092.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-7528fb70e8a4a82c7305e72ff43ac25f.woff2) format("woff2"),url(/static/merriweather-latin-900-3799b6e2f5ed3fcccf9d7a708d7419fa.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-e1b4d2aaa78e12ad84aaf8a56321e4c2.woff2) format("woff2"),url(/static/merriweather-latin-900italic-2ae22f731b3424e8dbb4b37f7ca6e708.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.gatsby-highlight{background:#272822;margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;overflow:auto;-webkit-overflow-scrolling:touch}.gatsby-highlight>pre[class*=language-]{overflow:auto;padding:1.3125rem}@font-face{font-display:swap;font-family:Montserrat;font-weight:400;font-style:normal;src:url(/static/Montserrat-400-bc3aa95dca08f5fee5291e34959c27bc.woff2) format("woff2") font-weight-normal,url(/static/Montserrat-400-8102c4838f9e3d08dad644290a9cb701.woff) format("woff") font-weight-normal,url(/static/Montserrat-400-6a9e85ac9247f5848db957b873c62e0c.ttf) format("truetype") font-weight-normal,url(/static/Montserrat-700-39d93cf678c740f9f6b2b1cfde34bee3.woff2) format("woff2") font-weight-bold,url(/static/Montserrat-700-80f10bd382f0df1cd650fec59f3c9394.woff) format("woff") font-weight-bold,url(/static/Montserrat-700-7432889d57c68a13a4984a756d923a07.ttf) format("truetype") font-weight-bold}:root{--bg:#fdfdff;--primary:#201b24;--secondary:#db9d47;--hover:#ff784f}body{font-family:Montserrat,"sans-serif"}@media (max-width:768px){footer{flex-direction:column}}footer{display:flex;justify-content:space-between;align-items:center}</style><meta name="generator" content="Gatsby 2.32.6"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="icon" href="/favicon-32x32.png?v=62dcc2ca9c3cd2d1abc7505583298b71" type="image/png"/><link rel="icon" href="/favicon.svg?v=62dcc2ca9c3cd2d1abc7505583298b71" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#db9d47"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=62dcc2ca9c3cd2d1abc7505583298b71"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">The Kubernetes dynamic client | Caio Ferreira</title><meta data-react-helmet="true" name="description" content="A dive into a hidden tool to build Controllers and Operators"/><meta data-react-helmet="true" property="og:title" content="The Kubernetes dynamic client"/><meta data-react-helmet="true" property="og:description" content="A dive into a hidden tool to build Controllers and Operators"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Caio Ferreira"/><meta data-react-helmet="true" name="twitter:title" content="The Kubernetes dynamic client"/><meta data-react-helmet="true" name="twitter:description" content="A dive into a hidden tool to build Controllers and Operators"/><meta data-react-helmet="true" name="keywords" content="blog, Caio Ferreira, javascript, functional programming, software architecture, Go, Kubernetes, Testing"/><style data-styled="hqzbql cINqao hiNdfp ePSoKC jGZUap kAEYIC dPmpCt bkeYwJ eIVkIG kOnNXb asniO dmlkuU buTKlK gISPTW drtymd cpTAoe fAtOsn hvxpIW eKdCzo kvEPVl dBWMCn lkPJmt eeFVyv QhiQR" data-styled-version="4.4.1">
/* sc-component-id: Headercomponent__Text-sc-10b1m6s-0 */
.dPmpCt{margin-bottom:0;}
/* sc-component-id: Headercomponent__Header-sc-10b1m6s-1 */
.hiNdfp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media (max-width:768px){.hiNdfp{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}
/* sc-component-id: Headercomponent__HeaderTitleWrapper-sc-10b1m6s-2 */
@media (max-width:768px){.ePSoKC{margin-bottom:10px;}}
/* sc-component-id: Headercomponent__HeaderTitle-sc-10b1m6s-3 */
.jGZUap{margin-bottom:0;margin-top:0;}
/* sc-component-id: Headercomponent__HeaderTitleLink-sc-10b1m6s-4 */
.kAEYIC{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;} .kAEYIC:hover{color:inherit;}
/* sc-component-id: Headercomponent__SubtitleDetail-sc-10b1m6s-5 */
.bkeYwJ{color:var(--secondary);-webkit-text-decoration:line-through;text-decoration:line-through;} .bkeYwJ:hover{-webkit-text-decoration:none;text-decoration:none;color:var(--hover);}
/* sc-component-id: Headercomponent__NavigationLink-sc-10b1m6s-6 */
.eIVkIG{box-shadow:0 1.4px 0.4px -0.5px var(--secondary);}
/* sc-component-id: Footercomponent__OutgoingLink-sc-364ywr-0 */
.lkPJmt{box-shadow:none;color:var(--secondary);margin-right:0.875rem;fill:var(--secondary);} .lkPJmt:hover{fill:var(--hover);}.eeFVyv{box-shadow:0 1px 0 0 var(--secondary);color:var(--secondary);margin-right:0.875rem;fill:var(--secondary);} .eeFVyv:hover{fill:var(--hover);}
/* sc-component-id: Footercomponent__FooterWrapper-sc-364ywr-1 */
.kvEPVl{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:4.375rem;}
/* sc-component-id: Footercomponent__FooterMessage-sc-364ywr-3 */
.QhiQR{margin-bottom:0;}
/* sc-component-id: Layoutcomponent__Background-ao6rp0-0 */
.hqzbql{background:var(--bg);height:100%;}
/* sc-component-id: Layoutcomponent__Container-ao6rp0-1 */
.cINqao{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-left:auto;margin-right:auto;max-width:42rem;min-height:100vh;color:var(--primary);padding:2.625rem 1.3125rem 0.875rem 1.3125rem;}
/* sc-component-id: Biocomponent__BioWrapper-sc-1p81r7j-0 */
.fAtOsn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:1.75rem;}
/* sc-component-id: Biocomponent__Avatar-sc-1p81r7j-1 */
.hvxpIW{margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%;}
/* sc-component-id: blog-post__CoverImage-gi2dsk-0 */
.kOnNXb{margin-left:-50%;margin-right:-50%;margin-bottom:1.75rem;max-height:28rem;} @media (max-width:768px){.kOnNXb{margin-left:-5%;margin-right:-5%;}}
/* sc-component-id: blog-post__Metadata-gi2dsk-1 */
.asniO{color:var(--secondary);margin-bottom:1.75rem;}
/* sc-component-id: blog-post__PostDateAndTime-gi2dsk-2 */
.dmlkuU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:4px;}
/* sc-component-id: blog-post__TagListWrapper-gi2dsk-3 */
.buTKlK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;} @media (max-width:768px){.buTKlK{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}}
/* sc-component-id: blog-post__Tag-gi2dsk-4 */
.gISPTW{margin-bottom:0;margin-right:0.4375rem;padding:0.035rem 0.58333rem;border-radius:3px;background:var(--secondary);color:var(--bg);} @media (max-width:768px){.gISPTW{margin-bottom:5px;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}.gISPTW:last-child{margin-bottom:5px;}}
/* sc-component-id: blog-post__Content-gi2dsk-5 */
.drtymd{text-align:justify;}
/* sc-component-id: blog-post__Divider-gi2dsk-6 */
.cpTAoe{margin-bottom:1.75rem;}
/* sc-component-id: blog-post__Navigation-gi2dsk-7 */
.eKdCzo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><link as="script" rel="preload" href="/webpack-runtime-8bf09dc14d26660d4941.js"/><link as="script" rel="preload" href="/framework-6c3ead24af170cdcb87c.js"/><link as="script" rel="preload" href="/app-5add9b32f93cdcc661e3.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/133dca110fad53aa1997b630637bbac3134a2d14-19c09b613e5baa98dedd.js"/><link as="script" rel="preload" href="/93241701166c3169d92c9fdd395837837cace836-21be44829f86d4becf19.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-48fe6b50030107f110f1.js"/><link as="fetch" rel="preload" href="/page-data/post/the-kubernetes-dynamic-client/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/143701507.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3694326227.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/88017042.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layoutcomponent__Background-ao6rp0-0 hqzbql"><div class="Layoutcomponent__Container-ao6rp0-1 cINqao"><header class="Headercomponent__Header-sc-10b1m6s-1 hiNdfp"><span class="Headercomponent__HeaderTitleWrapper-sc-10b1m6s-2 ePSoKC"><h1 class="Headercomponent__HeaderTitle-sc-10b1m6s-3 jGZUap"><a class="Headercomponent__HeaderTitleLink-sc-10b1m6s-4 kAEYIC" href="/">Caio Ferreira</a></h1><p class="Headercomponent__Text-sc-10b1m6s-0 dPmpCt">Simple Made <span class="Headercomponent__SubtitleDetail-sc-10b1m6s-5 bkeYwJ">Daily</span> (or whenever I can)</p></span><a class="Headercomponent__NavigationLink-sc-10b1m6s-6 eIVkIG" href="/about"><p class="Headercomponent__Text-sc-10b1m6s-0 dPmpCt">About me</p></a></header><main><h1>The Kubernetes dynamic client</h1><div class="blog-post__CoverImage-gi2dsk-0 kOnNXb gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:57.74193548387097%"></div><noscript><picture><source srcset="/static/9f0eaf646f5aa283fffbd26081ceefab/151a9/cover.png 310w,
/static/9f0eaf646f5aa283fffbd26081ceefab/edb0e/cover.png 620w,
/static/9f0eaf646f5aa283fffbd26081ceefab/f534f/cover.png 1240w,
/static/9f0eaf646f5aa283fffbd26081ceefab/25c5f/cover.png 1245w" sizes="(max-width: 1240px) 100vw, 1240px" /><img loading="lazy" sizes="(max-width: 1240px) 100vw, 1240px" srcset="/static/9f0eaf646f5aa283fffbd26081ceefab/151a9/cover.png 310w,
/static/9f0eaf646f5aa283fffbd26081ceefab/edb0e/cover.png 620w,
/static/9f0eaf646f5aa283fffbd26081ceefab/f534f/cover.png 1240w,
/static/9f0eaf646f5aa283fffbd26081ceefab/25c5f/cover.png 1245w" src="/static/9f0eaf646f5aa283fffbd26081ceefab/f534f/cover.png" alt="Post Cover Image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p class="blog-post__Metadata-gi2dsk-1 asniO"><p class="blog-post__PostDateAndTime-gi2dsk-2 dmlkuU"><span>May 28, 2021</span><span>9<!-- --> min read</span></p><p class="blog-post__TagListWrapper-gi2dsk-3 buTKlK"><p class="blog-post__Tag-gi2dsk-4 gISPTW">#<!-- -->Go</p><p class="blog-post__Tag-gi2dsk-4 gISPTW">#<!-- -->Kubernetes</p><p class="blog-post__Tag-gi2dsk-4 gISPTW">#<!-- -->Testing</p></p></p><section class="blog-post__Content-gi2dsk-5 drtymd"><h1>The Kubernetes dynamic client</h1>
<h2>Introduction</h2>
<p>Kubernetes won the battle for the cloud-native platform and the characteristic that makes me enjoy the most working with it is its extensibility. By providing an open model through the <code class="language-text">kube-apiserver</code>, without splitting an internal and external interface, we can interact with the cluster and any other system to integrate both from the same application (Controller) and even use custom resources to describe our unique operations, know as the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" target="_blank" rel="nofollow noopener noreferrer">Operator Pattern</a>.</p>
<p>Although one could use any HTTP Client to interact with the API Server, this is no simple task. There are many resources with different response structures and possible operations if we only consider the core resources on Kubernetes. Hence, Kubernetes itself provides a set of clients for easier integration through the <a href="http://k8s.io/client-go" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">k8s.io/client-go</code></a> project.</p>
<p>The most used client provided by this project is the <code class="language-text">k8s.io/client-go/kubernets.ClientSet</code>, which is a typed client. What that means is that this interface provides exclusive methods for each resource on Kubernetes (think of Pods, Deployments, Services, everything!) and operation (Create, Get, List, Watch, Update, Patch and Delete). It is obvious why you should, whenever possible, prefer to use this client.</p>
<p>However, there are situations where this can be limiting. It is when <code class="language-text">k8s.io/client-go/dynamic.Interface</code>, the dynamic client, will enter the game. This client has a twofold purpose:</p>
<p>First, it allows working with custom resources while avoiding strong dependencies. If you want to build some automation or workflow using another Operator as the building block, like ExternalDNS, CertManager, or Prometheus (Operator) usually you would need to add these projects as dependencies to use their Go types and register them on your client instance. This obviously introduces a lot of burdens as you now need to manage their ever-evolving versions and try to keep the version you have installed on the cluster matching the version on your <code class="language-text">go.mod</code>.</p>
<p>Secondly, you can work with multiple or unknown resources. When your operator implements a generic logic that can interact with any common Kubernetes resource (from RBAC to Pods) and even custom resources, the dynamic client may be your only solution. A few examples are the garbage collection controller relies heavily on it and if you would want to add support for an arbitrary custom resource on a project like <a href="https://github.com/bitnami-labs/kubewatch" target="_blank" rel="nofollow noopener noreferrer">KubeWatch</a>.</p>
<p>Therefore, let’s dive into this resourceful (<em>pun intended</em>) component of the <a href="http://k8s.io/client-go" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">k8s.io/client-go</code></a> project and see how we can leverage it.</p>
<h2>Basic operations with the dynamic client</h2>
<blockquote>
<p>The code below assumes to be running inside a Kubernetes cluster.</p>
</blockquote>
<p>Many operations with the dynamic client is similar to the typed client, like creating a new instance can be done by providing the config to its constructor:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">newClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>dynamic<span class="token punctuation">.</span>Interface<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	config<span class="token punctuation">,</span> err <span class="token operator">:=</span> rest<span class="token punctuation">.</span><span class="token function">InClusterConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>

	dynClient<span class="token punctuation">,</span> err <span class="token operator">:=</span> dynamic<span class="token punctuation">.</span><span class="token function">NewForConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> dynClient<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since the dynamic client has no knowledge about the resource you want to consume, it does not provide helper methods like <code class="language-text">CoreV1().Pod</code> . Instead, you need to first provide a <code class="language-text">schema.GroupVersionResource</code>, which is a Golang type that provides the necessary information to construct an HTTP request to the cluster API Server.</p>
<p>For example, if you want a function to list all MongoDB resources from the MongoDB Community Operator:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">var</span> monboDBResource <span class="token operator">=</span> schema<span class="token punctuation">.</span>GroupVersionResource<span class="token punctuation">{</span>Group<span class="token punctuation">:</span> <span class="token string">"mongodbcommunity.mongodb.com"</span><span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span> Resource<span class="token punctuation">:</span> <span class="token string">"mongodbcommunity"</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ListMongoDB</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> client dynamic<span class="token punctuation">.</span>Interface<span class="token punctuation">,</span> namespace <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>unstructured<span class="token punctuation">.</span>Unstructured<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// GET /apis/mongodbcommunity.mongodb.com/v1/namespaces/{namespace}/mongodbcommunity/</span>
	list<span class="token punctuation">,</span> err <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Resource</span><span class="token punctuation">(</span>monboDBResource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Namespace</span><span class="token punctuation">(</span>namespace<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>ListOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> list<span class="token punctuation">.</span>Items<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Note that if you are dealing with a namespaced resource then <code class="language-text">.Namespace(namespace)</code> is obligatory, even if you will use an empty string to list on all namespaces.</p>
<p>In this snippet, we can see the main companion of the dynamic client: <code class="language-text">unstructured.Unstructured</code>. This is a special type that encapsulates an arbitrary JSON while also complying with standard Kubernetes interfaces like <code class="language-text">runtime.Object</code> , but most importantly it provides a set of helpers on the <code class="language-text">unstructured</code> package to manipulate this data.</p>
<p>Expanding our example, if we would scale a MongoDB by an proportion we could do so like:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token comment">// ScaleMongoDB changes the number of members by the given proportion,</span>
<span class="token comment">// which should be 0 =&lt; proportion &lt; 1.</span>
<span class="token keyword">func</span> <span class="token function">ScaleMongoDB</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> client dynamic<span class="token punctuation">.</span>Interface<span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">,</span> namespace <span class="token builtin">string</span><span class="token punctuation">,</span> proportion <span class="token builtin">uint</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> proportion <span class="token operator">></span> <span class="token number">1</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"proportion should be between 0 =&lt; proportion &lt; 1"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	mongoDBClient <span class="token operator">:=</span> client<span class="token punctuation">.</span><span class="token function">Resource</span><span class="token punctuation">(</span>monboDBResource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Namespace</span><span class="token punctuation">(</span>namespace<span class="token punctuation">)</span>
	mdb<span class="token punctuation">,</span> err <span class="token operator">:=</span> mongoDBClient<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> name<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>GetOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>

	members<span class="token punctuation">,</span> found<span class="token punctuation">,</span> err <span class="token operator">:=</span> unstructured<span class="token punctuation">.</span><span class="token function">NestedInt64</span><span class="token punctuation">(</span>mdb<span class="token punctuation">.</span><span class="token function">UnstructuredContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"spec"</span><span class="token punctuation">,</span> <span class="token string">"members"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token operator">!</span>found <span class="token punctuation">{</span>
		<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"members field not found on MongoDB spec"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	scaled <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>members<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token function">int</span><span class="token punctuation">(</span>proportion<span class="token punctuation">)</span><span class="token punctuation">)</span>

	patch <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
			<span class="token string">"op"</span><span class="token punctuation">:</span>    <span class="token string">"replace"</span><span class="token punctuation">,</span>
			<span class="token string">"path"</span><span class="token punctuation">:</span>  <span class="token string">"/spec/members"</span><span class="token punctuation">,</span>
			<span class="token string">"value"</span><span class="token punctuation">:</span> scaled<span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	payload<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>patch<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>

	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> mongoDBClient<span class="token punctuation">.</span><span class="token function">Patch</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> name<span class="token punctuation">,</span> types<span class="token punctuation">.</span>JSONPatchType<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> metav1<span class="token punctuation">.</span>PatchOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Here we leverage <code class="language-text">unstructured.NestedInt64</code> to access only the field that we are interested in, keeping our coupling to the MongoDB CRD to a minimum while also being able to manipulate the resource data with type safety.</p>
<p>The <code class="language-text">unstructured</code> package has lots of helpers like this, not only for reading but also for writing to any field on the resource.</p>
<p>Performing all the usual operations on Kubernetes (get, list, watch, create, patch, and delete) follow the same approach: provide the <code class="language-text">scheme.GroupVersionResource</code> and handle the <code class="language-text">unstructured.Unstructured</code> result.</p>
<h2>Controller with a dynamic client</h2>
<p>More advanced but frequent use of a Kubernetes client is to build a controller that reacts to changes on the actual cluster state to bring it to the desired state.</p>
<p>Usually, we leverage an Informer, a component provided by <code class="language-text">k8s.io/client-go</code>, that runs a handler when changes are detected, created from a typed client. Luckily the <code class="language-text">dynamic</code> package also provides an Informer component that we can use.</p>
<p>For example, if we want to capture when a MongoDB is deleted to clean the associated <code class="language-text">PersistentVolumeClaims</code>:</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	utilruntime <span class="token string">"k8s.io/apimachinery/pkg/util/runtime"</span>
	<span class="token string">"k8s.io/apimachinery/pkg/util/wait"</span>
	<span class="token string">"k8s.io/client-go/dynamic"</span>
	<span class="token string">"k8s.io/client-go/dynamic/dynamicinformer"</span>
	<span class="token string">"k8s.io/client-go/tools/cache"</span>
	<span class="token string">"k8s.io/client-go/util/workqueue"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> maxRetries <span class="token operator">=</span> <span class="token number">3</span>

<span class="token keyword">var</span> monboDBResource <span class="token operator">=</span> schema<span class="token punctuation">.</span>GroupVersionResource<span class="token punctuation">{</span>Group<span class="token punctuation">:</span> <span class="token string">"mongodbcommunity.mongodb.com"</span><span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span> Resource<span class="token punctuation">:</span> <span class="token string">"mongodbcommunity"</span><span class="token punctuation">}</span>

<span class="token keyword">type</span> MongoDBController <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	informer cache<span class="token punctuation">.</span>SharedIndexInformer
	stopper  <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	queue    workqueue<span class="token punctuation">.</span>RateLimitingInterface
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewMongoDBController</span><span class="token punctuation">(</span>client dynamic<span class="token punctuation">.</span>Interface<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>MongoDBController<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	dynInformer <span class="token operator">:=</span> dynamicinformer<span class="token punctuation">.</span><span class="token function">NewDynamicSharedInformerFactory</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	informer <span class="token operator">:=</span> dynInformer<span class="token punctuation">.</span><span class="token function">ForResource</span><span class="token punctuation">(</span>monboDBResource<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Informer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	stopper <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	queue <span class="token operator">:=</span> workqueue<span class="token punctuation">.</span><span class="token function">NewRateLimitingQueue</span><span class="token punctuation">(</span>workqueue<span class="token punctuation">.</span><span class="token function">DefaultControllerRateLimiter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	informer<span class="token punctuation">.</span><span class="token function">AddEventHandler</span><span class="token punctuation">(</span>cache<span class="token punctuation">.</span>ResourceEventHandlerFuncs<span class="token punctuation">{</span>
		DeleteFunc<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>obj <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			key<span class="token punctuation">,</span> err <span class="token operator">:=</span> cache<span class="token punctuation">.</span><span class="token function">DeletionHandlingMetaNamespaceKeyFunc</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				queue<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token operator">&amp;</span>MongoDBController<span class="token punctuation">{</span>
		informer<span class="token punctuation">:</span> informer<span class="token punctuation">,</span>
		queue<span class="token punctuation">:</span> queue<span class="token punctuation">,</span>
		stopper<span class="token punctuation">:</span> stopper<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MongoDBController<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">close</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>stopper<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MongoDBController<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> utilruntime<span class="token punctuation">.</span><span class="token function">HandleCrash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">defer</span> m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">ShutDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> m<span class="token punctuation">.</span>informer<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>stopper<span class="token punctuation">)</span>

	<span class="token comment">// wait for the caches to synchronize before starting the worker</span>
	<span class="token keyword">if</span> <span class="token operator">!</span>cache<span class="token punctuation">.</span><span class="token function">WaitForCacheSync</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>stopper<span class="token punctuation">,</span> m<span class="token punctuation">.</span>informer<span class="token punctuation">.</span>HasSynced<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		utilruntime<span class="token punctuation">.</span><span class="token function">HandleError</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"timed out waiting for caches to sync"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// runWorker will loop until some problem happens. The wait.Until will then restart the worker after one second</span>
	wait<span class="token punctuation">.</span><span class="token function">Until</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>runWorker<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">,</span> m<span class="token punctuation">.</span>stopper<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MongoDBController<span class="token punctuation">)</span> <span class="token function">runWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		key<span class="token punctuation">,</span> quit <span class="token operator">:=</span> m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> quit <span class="token punctuation">{</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>

		err <span class="token operator">:=</span> m<span class="token punctuation">.</span><span class="token function">processItem</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">Forget</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">NumRequeues</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&lt;</span> maxRetries <span class="token punctuation">{</span>
			m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">AddRateLimited</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">Forget</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
			utilruntime<span class="token punctuation">.</span><span class="token function">HandleError</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		m<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>MongoDBController<span class="token punctuation">)</span> <span class="token function">processItem</span><span class="token punctuation">(</span>mongodb <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token comment">// Clean up PVCs</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Most of this code is standard, like the work queue, informer event handlers, and item processing, of a controller using the typed client.</p>
<p>Hence, leveraging the decoupling provided by the dynamic client really comes with a low overhead in terms of complexity.</p>
<h2>Testing with the dynamic client</h2>
<p>If we were to scale the use of the dynamic client it is paramount that it is as easy to test as the typed client.</p>
<p>As in the controller case, the <code class="language-text">dynamic</code> package provides an equivalent fake client that allows for stubbing objects and asserting actions performed using it.</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token string">"k8s.io/apimachinery/pkg/runtime"</span>
	dynamicfake <span class="token string">"k8s.io/client-go/dynamic/fake"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestDynamicClient</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Setup an Object as mock on the client</span>
	<span class="token comment">// Write it like its YAML manifest</span>
	mdb <span class="token operator">:=</span> <span class="token operator">&amp;</span>unstructured<span class="token punctuation">.</span>Unstructured<span class="token punctuation">{</span><span class="token punctuation">}</span>
	mdb<span class="token punctuation">.</span><span class="token function">SetUnstructuredContent</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token string">"apiVersion"</span><span class="token punctuation">:</span> <span class="token string">"mongodbcommunity.mongodb.com/v1"</span><span class="token punctuation">,</span>
		<span class="token string">"kind"</span><span class="token punctuation">:</span> <span class="token string">"MongoDBCommunity"</span><span class="token punctuation">,</span>
		<span class="token string">"metadata"</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
			<span class="token string">"name"</span><span class="token punctuation">:</span>      <span class="token string">"mongodb-test"</span><span class="token punctuation">,</span>
			<span class="token string">"namespace"</span><span class="token punctuation">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">"spec"</span><span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span>
			<span class="token string">"members"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	dynamicClient <span class="token operator">:=</span> dynamicfake<span class="token punctuation">.</span><span class="token function">NewSimpleDynamicClient</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">NewScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mdb<span class="token punctuation">)</span>

	<span class="token comment">// Run any logic that depend on the dynamic client</span>
  <span class="token function">NotifyMongoDBs</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dynamicClient<span class="token punctuation">)</span>

	<span class="token function">AssertActions</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>  dynamicClient<span class="token punctuation">.</span><span class="token function">Actions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>ExpectedAction<span class="token punctuation">{</span>
		<span class="token punctuation">{</span>
			Verb<span class="token punctuation">:</span> <span class="token string">"list"</span><span class="token punctuation">,</span>
			Namespace<span class="token punctuation">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
			Resource<span class="token punctuation">:</span> <span class="token string">"mongodbcommunity"</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span></code></pre></div>
<p>Using the <code class="language-text">unestructured.Unestructured</code> type we can create stub Kubernetes objects using the same syntax as in YAML, but with maps.</p>
<p>After performing the tested logic we can use <code class="language-text">dynamicClient.Actions()</code> to see all operations that were performed by our code. However, manually asserting these actions on every test often lead to unreadable code and brittle assertions.</p>
<p>Hence, I often use a special assertion function <code class="language-text">AssertActions</code> that verify if every expected action can be found in the performed actions. An important note is that this function does not perform an exact list match, i.e. if a delete operation was performed using the client the test would not break, the only condition for the <code class="language-text">AssertActions</code> to fail is if the list operation provided on the expected list isn’t found. One could change the asserting function or make a sibling function that validates only if the expected actions were performed.</p>
<p>Although the current implementation is verbose, this function has the benefit of working both with the dynamic and the typed client.</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">type</span> ExpectedAction <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Verb <span class="token builtin">string</span>
	Name <span class="token builtin">string</span>
	Namespace <span class="token builtin">string</span>
	Resource <span class="token builtin">string</span>

	<span class="token comment">// Patch action</span>
	PatchType types<span class="token punctuation">.</span>PatchType
	PatchPayload <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">AssertActions</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> got <span class="token punctuation">[</span><span class="token punctuation">]</span>kubetesting<span class="token punctuation">.</span>Action<span class="token punctuation">,</span> expected <span class="token punctuation">[</span><span class="token punctuation">]</span>ExpectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token function">len</span><span class="token punctuation">(</span>got<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"executed actions too short, expected %d, got %d"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>got<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> expectedAction <span class="token operator">:=</span> <span class="token keyword">range</span> expected <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">AssertExpectedAction</span><span class="token punctuation">(</span>got<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"action %d does not match any of the got actions"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">AssertExpectedAction</span><span class="token punctuation">(</span>got <span class="token punctuation">[</span><span class="token punctuation">]</span>kubetesting<span class="token punctuation">.</span>Action<span class="token punctuation">,</span> expectedAction ExpectedAction<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> gotAction <span class="token operator">:=</span> <span class="token keyword">range</span> got <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> expectedAction<span class="token punctuation">.</span>Verb <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token string">"get"</span><span class="token punctuation">:</span>
			getAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>GetAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> getAction<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> expectedAction<span class="token punctuation">.</span>Name <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>getAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"list"</span><span class="token punctuation">:</span>
			listAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>ListAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>listAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"watch"</span><span class="token punctuation">:</span>
			watchAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>WatchAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>watchAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"create"</span><span class="token punctuation">:</span>
			createAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>CreateAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>createAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"update"</span><span class="token punctuation">:</span>
			updateAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>UpdateAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>updateAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"delete"</span><span class="token punctuation">:</span>
			deleteAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>DeleteAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> deleteAction<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> expectedAction<span class="token punctuation">.</span>Name <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>deleteAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token keyword">case</span> <span class="token string">"patch"</span><span class="token punctuation">:</span>
			patchAction<span class="token punctuation">,</span> ok <span class="token operator">:=</span> gotAction<span class="token punctuation">.</span><span class="token punctuation">(</span>kubetesting<span class="token punctuation">.</span>PatchAction<span class="token punctuation">)</span>
			<span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> patchAction<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> expectedAction<span class="token punctuation">.</span>Name <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>patchAction<span class="token punctuation">,</span> expectedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> patchAction<span class="token punctuation">.</span><span class="token function">GetPatchType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> expectedAction<span class="token punctuation">.</span>PatchType <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			patchBytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>expectedAction<span class="token punctuation">.</span>PatchPayload<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token operator">!</span>bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>patchAction<span class="token punctuation">.</span><span class="token function">GetPatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> patchBytes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">validateNamespaceAndResource</span><span class="token punctuation">(</span>action kubetesting<span class="token punctuation">.</span>Action<span class="token punctuation">,</span> expectedAction ExpectedAction<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> action<span class="token punctuation">.</span><span class="token function">GetNamespace</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> expectedAction<span class="token punctuation">.</span>Namespace <span class="token operator">&amp;&amp;</span> action<span class="token punctuation">.</span><span class="token function">GetResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Resource <span class="token operator">==</span> expectedAction<span class="token punctuation">.</span>Resource
<span class="token punctuation">}</span></code></pre></div>
<p>This asserting function allows for more conditions to be added, like verifying list/watch restrictions and create/update bodies.</p>
<h2>Conclusion</h2>
<p>The Kubernetes ecosystem is rich and every now and then we stumble upon this kind of treasure. I strongly recommend reading through the documentation not only of the <a href="http://k8s.io/client-go" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">k8s.io/client-go</code></a> but also other like <a href="https://pkg.go.dev/sigs.k8s.io/controller-runtime" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">sigs.k8s.io/controller-runtime</code></a> project and the <a href="https://kubernetes.io/docs/reference/kubernetes-api/" target="_blank" rel="nofollow noopener noreferrer">Kubernetes Reference API</a> documentation.</p></section><hr class="blog-post__Divider-gi2dsk-6 cpTAoe"/><div class="Biocomponent__BioWrapper-sc-1p81r7j-0 fAtOsn"><div class="Biocomponent__Avatar-sc-1p81r7j-1 hvxpIW gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF9ElEQVQ4yyWUeVAUdBzFf6tjjaU1UYNZGVJmASqUB5gpqBAEyCnKjQrL4XIsLPcdx6JgXBLggiLEugSLcrPSCiywCyi0SJiBSJ4ciheV6R6/10rfmffPm/l+vm/mO/OIQqEifTI5EV+SMgAwMnNKiGz4qrZY0h/b3tXbX15V+zw5LQcxiZkIYycseHkyO/fu/o61x9R6xetvvE++OxC4hCzO2+SdjzYS8uKFglz9bZwRx0ohGiBJ5hYGjPw+OS+7chX5BcUw0DeC1lvaVGfNF1RXZwPWfmyATZu2Q89g+21Cljtqf7Ll1R6DkLeI1hpDsgh5pZCMJiJslZfGp55EaVklosM4Cm9rexXTzommMP3haWEFnTX69L3316u0V32mWPf5Zhib2mHpa1qJJ8trCL9exFgMGhqZtiQjr+wVNPfu7FOERuco39Varc6PisSjoV/ps9FR+uzKZXqtuoLGONhS3VU69F1tXaxYqa0KZCeq44/xEJ1WFMZJKSTxWaeWEhOz/cTlMMdxcuqWhglVZFwGPWRrg6eyTvp4aJA+vz6Kv0aH8Egmxf22JvBjw+lGHV36xpurYL3voFrQJkXFBQlOn+/ecqahezHkMrJM53pIVPoikMs9DmFWIp2XdGK2uwt/yS9jQT6IJ5cHMC+VYaajGeWcIBiu/ZR+8pkhzgrFyhrRZVQ1S8VVTVJCfhH3HajiN2JYPqZ8RYxhh1FpeSHm+/rwSCrFk34ZHvZ0YfaSGHfbWzEuPIfxugpk+3rCxHgXFYr6qaBNpq4TD6GqqceY/PNSLVBrQI//Vil/nZyn3KRUerNJoIF0Y2FwEHOdEty/2IHpjl8wLRZjsqkefzbXIC/QB3p6RrS0spEmZBYp+c19aOm5dozwL8rHqzuuoqJ1WF1Y30ejQzjI8GMiLTAEA+WncbexFXebWjAnEmOmXYQJoQC3G6sR72oHs28d0DX0J03I4qnYccfBLTzbQU7Wdf2bx7+I/GoRPX6mgaYFs+BuYoxVWh/gyw91cJrpA0lGAmoiQsFxcoGvjROKw8OR5euByPgsDE8+poJGCQ0ITYJ3YOQMKRSIkfeTiGaXN4B76jzqi37AKdYheJtbw05fH9n7v0VLfBD2f7oaWive0xxaDaaZKbKPHkFJeQ3G7v1NB8buIC27hLr6xYDortvwwjcsGdxSIY3K5tHzvFO4LzqPwcLsRd1pa8RUUy2qg72Q4+GB1IOu4EcwUcVNQYNkDNfvLdCJ6QUqHriG5KySB2TJkuU3GIxlsHL2VPuwkmhRcgrmOtoxI5Zgovac5jm9mKivhZyXh8mac7ih8abbhEgN5yA2pxKXBidp78gdVd/oPfTIpy6R9XqGdQzyOvTXGystrA7RpOBQOlXPx1RdLUZ4RZhubcfYmTLI8o7h9oUW3LrQgJ6Tx2Fv5wL34O9pQk4lbe75Qykdm8bg+NwJom+4zdPRjQV2XIFy8659OOjgTPtLMyEpzUUxh40Tnq7IcndFc2oyJqrPYqyiBCdCmQgMiYaDWxANisujkZkV6p8vynFlfGYn0TP3Xh7CrbjpGpQCo12OKr0NJjgb60e9zHfAft0XqPDyQpqFDWzXGyDdxwXdP36PcCdLNNcKKSsyA7YHApX+MbkISCjo3bjFiZB9nmHEiRnvYW5/GLvtjij1TGyoj/VeyIoTKc/NidZq/HobDxQ4WaMuKQCxPm7U3YdDR0QNmLj/TO3JjKJuQQlwZ6fv9IjIJETQ/4CRVTdMrFz8y2y9ImC674jCws5bnc8JQGd+LPU3NaPRNpYYKMukpZzDdOumLdQimAcxv0r1gkLV0TcKZ2924k5LD+LPTl9K1m3a/n+PacbSNVRgeZAFZkQ6DkQVK/aYbFd77N6B/WbfUBuTzXDeYURz2X6qr3xLFO2tUsw+VWJBoc4pyD1Bkth+ZO4fFSGGO6zItr3OjK8dWMRgjyUxdfSLcfM5+jy7ZRIrrZMQaG9B4xy2Io9pRQd5qRi9UAWjo5UQXnnwcGb+5aGHL/8v6Gu3Zhm9IzfIf4dPwYiccUhKAAAAAElFTkSuQmCC" alt="Caio Ferreira" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms;border-radius:50%"/><noscript><picture><source srcset="/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/8ba1e/me.png 1x,
/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/f937a/me.png 1.5x,
/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/71eb7/me.png 2x" /><img loading="lazy" width="50" height="50" srcset="/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/8ba1e/me.png 1x,
/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/f937a/me.png 1.5x,
/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/71eb7/me.png 2x" src="/static/59fa6fc8ee9a74a7315b43d2eb84cfa7/8ba1e/me.png" alt="Caio Ferreira" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>I am passionate by functional programming, software architecture and making simple code.<!-- --> </p></div><ul class="blog-post__Navigation-gi2dsk-7 eKdCzo"><li><a rel="prev" href="/post/introducing-cache-in-your-system/">← <!-- -->Introducing Cache in your System</a></li><li></li></ul></main><footer class="Footercomponent__FooterWrapper-sc-364ywr-1 kvEPVl"><section class="Footercomponent__SocialWrapper-sc-364ywr-2 dBWMCn"><a target="_blank" rel="nofollow noopener noreferrer" aria-label="Twitter" aria-hidden="true" href="https://twitter.com/caiorcferreira" class="Footercomponent__OutgoingLink-sc-364ywr-0 lkPJmt"><svg alt="Caio Ferreira&#x27;s Twitter Profile" style="height:30;width:30" version="1.1" x="0px" y="0px" viewBox="0 0 410.155 410.155" xml:space="preserve"><path d="M403.632,74.18c-9.113,4.041-18.573,7.229-28.28,9.537c10.696-10.164,18.738-22.877,23.275-37.067
	l0,0c1.295-4.051-3.105-7.554-6.763-5.385l0,0c-13.504,8.01-28.05,14.019-43.235,17.862c-0.881,0.223-1.79,0.336-2.702,0.336
	c-2.766,0-5.455-1.027-7.57-2.891c-16.156-14.239-36.935-22.081-58.508-22.081c-9.335,0-18.76,1.455-28.014,4.325
	c-28.672,8.893-50.795,32.544-57.736,61.724c-2.604,10.945-3.309,21.9-2.097,32.56c0.139,1.225-0.44,2.08-0.797,2.481
	c-0.627,0.703-1.516,1.106-2.439,1.106c-0.103,0-0.209-0.005-0.314-0.015c-62.762-5.831-119.358-36.068-159.363-85.14l0,0
	c-2.04-2.503-5.952-2.196-7.578,0.593l0,0C13.677,65.565,9.537,80.937,9.537,96.579c0,23.972,9.631,46.563,26.36,63.032
	c-7.035-1.668-13.844-4.295-20.169-7.808l0,0c-3.06-1.7-6.825,0.485-6.868,3.985l0,0c-0.438,35.612,20.412,67.3,51.646,81.569
	c-0.629,0.015-1.258,0.022-1.888,0.022c-4.951,0-9.964-0.478-14.898-1.421l0,0c-3.446-0.658-6.341,2.611-5.271,5.952l0,0
	c10.138,31.651,37.39,54.981,70.002,60.278c-27.066,18.169-58.585,27.753-91.39,27.753l-10.227-0.006
	c-3.151,0-5.816,2.054-6.619,5.106c-0.791,3.006,0.666,6.177,3.353,7.74c36.966,21.513,79.131,32.883,121.955,32.883
	c37.485,0,72.549-7.439,104.219-22.109c29.033-13.449,54.689-32.674,76.255-57.141c20.09-22.792,35.8-49.103,46.692-78.201
	c10.383-27.737,15.871-57.333,15.871-85.589v-1.346c-0.001-4.537,2.051-8.806,5.631-11.712c13.585-11.03,25.415-24.014,35.16-38.591
	l0,0C411.924,77.126,407.866,72.302,403.632,74.18L403.632,74.18z"></path><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a><a target="_blank" rel="nofollow noopener noreferrer" aria-label="Dev Community" aria-hidden="true" href="https://dev.to/caiorcferreira" class="Footercomponent__OutgoingLink-sc-364ywr-0 lkPJmt"><svg alt="Caio Ferreira&#x27;s DEV Profile" style="height:30;width:30" role="img" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"></path></svg></a><a target="_blank" rel="nofollow noopener noreferrer" aria-label="Github" aria-hidden="true" href="https://github.com/caiorcferreira" class="Footercomponent__OutgoingLink-sc-364ywr-0 lkPJmt"><svg alt="Caio Ferreira&#x27;s Github Profile" style="height:30;width:30" version="1.1" id="Capa_1" x="0px" y="0px" width="438.549px" height="438.549px" viewBox="0 0 438.549 438.549" xml:space="preserve"><g><path d="M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365
		c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63
		c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996
		c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136
		c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559
		c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559
		c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997
		c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851
		c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136
		c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41
		c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126
		c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817
		c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994
		c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849
		c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24
		c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979
		c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146
		c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995
		c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906
		C438.536,184.851,428.728,148.168,409.132,114.573z"></path></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a><a target="_blank" rel="nofollow noopener noreferrer" aria-label="Medium" aria-hidden="true" href="https://medium.com/@caiorcferreira" class="Footercomponent__OutgoingLink-sc-364ywr-0 lkPJmt"><svg alt="Caio Ferreira&#x27;s Medium Profile" style="height:30;width:30" version="1.1" x="0px" y="0px" viewBox="0 0 393.541 393.541" xml:space="preserve"><path d="M384.045,363.079L262.84,304.812L261.927,40.68c-0.021-6.166,6.416-10.229,11.973-7.557
	l114.908,55.256c2.893,1.391,4.733,4.318,4.733,7.528v261.201C393.54,361.989,388.443,365.194,384.045,363.079z"></path><path d="M262.84,304.812L131.66,241.74L257.948,33.818c2.231-3.673,6.886-5.054,10.759-3.192l116.514,56.029
	c4.454,2.142,6.085,7.661,3.51,11.879L262.84,304.812z"></path><path d="M262.84,304.812L131.66,241.74L11.421,45.942c-3.35-5.455,2.479-11.914,8.248-9.14L131.66,90.655
	L262.84,304.812z"></path><path d="M122.164,363.078l-118.41-56.94C1.459,305.034,0,302.713,0,300.167V37.548
	c0-4.726,4.937-7.831,9.197-5.782L131.66,90.655v266.452C131.66,361.988,126.562,365.193,122.164,363.078z"></path><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a><a target="_blank" rel="nofollow noopener noreferrer" aria-label="Linkedin" aria-hidden="true" href="https://www.linkedin.com/in/caiorcferreira/" class="Footercomponent__OutgoingLink-sc-364ywr-0 lkPJmt"><svg alt="Caio Ferreira&#x27;s LinkedIn Profile" style="height:30;width:30" version="1.1" x="0px" y="0px" viewBox="0 0 382 382" xml:space="preserve"><path d="M347.445,0H34.555C15.471,0,0,15.471,0,34.555v312.889C0,366.529,15.471,382,34.555,382h312.889
	C366.529,382,382,366.529,382,347.444V34.555C382,15.471,366.529,0,347.445,0z M118.207,329.844c0,5.554-4.502,10.056-10.056,10.056
	H65.345c-5.554,0-10.056-4.502-10.056-10.056V150.403c0-5.554,4.502-10.056,10.056-10.056h42.806
	c5.554,0,10.056,4.502,10.056,10.056V329.844z M86.748,123.432c-22.459,0-40.666-18.207-40.666-40.666S64.289,42.1,86.748,42.1
	s40.666,18.207,40.666,40.666S109.208,123.432,86.748,123.432z M341.91,330.654c0,5.106-4.14,9.246-9.246,9.246H286.73
	c-5.106,0-9.246-4.14-9.246-9.246v-84.168c0-12.556,3.683-55.021-32.813-55.021c-28.309,0-34.051,29.066-35.204,42.11v97.079
	c0,5.106-4.139,9.246-9.246,9.246h-44.426c-5.106,0-9.246-4.14-9.246-9.246V149.593c0-5.106,4.14-9.246,9.246-9.246h44.426
	c5.106,0,9.246,4.14,9.246,9.246v15.655c10.497-15.753,26.097-27.912,59.312-27.912c73.552,0,73.131,68.716,73.131,106.472
	L341.91,330.654L341.91,330.654z"></path><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg></a></section><p class="Footercomponent__FooterMessage-sc-364ywr-3 QhiQR">© <!-- -->2021<!-- -->, Built with<!-- --> <a target="_blank" rel="nofollow noopener noreferrer" aria-hidden="true" href="https://www.gatsbyjs.org" class="Footercomponent__OutgoingLink-sc-364ywr-0 eeFVyv">Gatsby</a></p></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-137605639-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/the-kubernetes-dynamic-client/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c4336065681b4417609f.js"],"app":["/app-5add9b32f93cdcc661e3.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-f7968005d4116a7aa2f8.js"],"component---src-pages-404-js":["/component---src-pages-404-js-10c8925e21870b388028.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c2ee9b4d3c8e86b2891c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-692cdb10e9e4bf8a3c49.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-48fe6b50030107f110f1.js"]};/*]]>*/</script><script src="/polyfill-c4336065681b4417609f.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-48fe6b50030107f110f1.js" async=""></script><script src="/93241701166c3169d92c9fdd395837837cace836-21be44829f86d4becf19.js" async=""></script><script src="/133dca110fad53aa1997b630637bbac3134a2d14-19c09b613e5baa98dedd.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/app-5add9b32f93cdcc661e3.js" async=""></script><script src="/framework-6c3ead24af170cdcb87c.js" async=""></script><script src="/webpack-runtime-8bf09dc14d26660d4941.js" async=""></script></body></html>